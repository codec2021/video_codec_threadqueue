; Listing generated by Microsoft (R) Optimizing Compiler Version 19.26.28806.0 

include listing.inc

INCLUDELIB OLDNAMES

EXTRN	__imp_malloc:PROC
EXTRN	__imp__wassert:PROC
EXTRN	__imp_free:PROC
EXTRN	__imp_realloc:PROC
PUBLIC	kvz_threadqueue_stop
PUBLIC	kvz_threadqueue_free_job
PUBLIC	kvz_threadqueue_copy_ref
PUBLIC	kvz_threadqueue_job_dep_add
PUBLIC	kvz_threadqueue_job_create
PUBLIC	kvz_threadqueue_waitfor
PUBLIC	kvz_threadqueue_submit
PUBLIC	kvz_threadqueue_free
PUBLIC	kvz_threadqueue_init
pdata	SEGMENT
$pdata$kvz_threadqueue_stop DD imagerel $LN88
	DD	imagerel $LN88+329
	DD	imagerel $unwind$kvz_threadqueue_stop
$pdata$kvz_threadqueue_free_job DD imagerel $LN68
	DD	imagerel $LN68+18
	DD	imagerel $unwind$kvz_threadqueue_free_job
$pdata$0$kvz_threadqueue_free_job DD imagerel $LN68+18
	DD	imagerel $LN68+47
	DD	imagerel $chain$0$kvz_threadqueue_free_job
$pdata$1$kvz_threadqueue_free_job DD imagerel $LN68+47
	DD	imagerel $LN68+183
	DD	imagerel $chain$1$kvz_threadqueue_free_job
$pdata$2$kvz_threadqueue_free_job DD imagerel $LN68+183
	DD	imagerel $LN68+188
	DD	imagerel $chain$2$kvz_threadqueue_free_job
$pdata$3$kvz_threadqueue_free_job DD imagerel $LN68+188
	DD	imagerel $LN68+194
	DD	imagerel $chain$3$kvz_threadqueue_free_job
$pdata$kvz_threadqueue_copy_ref DD imagerel $LN6
	DD	imagerel $LN6+61
	DD	imagerel $unwind$kvz_threadqueue_copy_ref
$pdata$kvz_threadqueue_job_dep_add DD imagerel $LN63
	DD	imagerel $LN63+213
	DD	imagerel $unwind$kvz_threadqueue_job_dep_add
$pdata$threadqueue_worker DD imagerel threadqueue_worker
	DD	imagerel threadqueue_worker+849
	DD	imagerel $unwind$threadqueue_worker
$pdata$threadqueue_pop_job DD imagerel threadqueue_pop_job
	DD	imagerel threadqueue_pop_job+78
	DD	imagerel $unwind$threadqueue_pop_job
$pdata$threadqueue_push_job DD imagerel threadqueue_push_job
	DD	imagerel threadqueue_push_job+99
	DD	imagerel $unwind$threadqueue_push_job
$pdata$kvz_threadqueue_job_create DD imagerel $LN16
	DD	imagerel $LN16+159
	DD	imagerel $unwind$kvz_threadqueue_job_create
$pdata$kvz_threadqueue_waitfor DD imagerel $LN63
	DD	imagerel $LN63+118
	DD	imagerel $unwind$kvz_threadqueue_waitfor
$pdata$kvz_threadqueue_submit DD imagerel $LN66
	DD	imagerel $LN66+232
	DD	imagerel $unwind$kvz_threadqueue_submit
$pdata$kvz_threadqueue_free DD imagerel $LN132
	DD	imagerel $LN132+534
	DD	imagerel $unwind$kvz_threadqueue_free
$pdata$kvz_threadqueue_init DD imagerel $LN134
	DD	imagerel $LN134+171
	DD	imagerel $unwind$kvz_threadqueue_init
$pdata$2$kvz_threadqueue_init DD imagerel $LN134+171
	DD	imagerel $LN134+383
	DD	imagerel $chain$2$kvz_threadqueue_init
$pdata$4$kvz_threadqueue_init DD imagerel $LN134+383
	DD	imagerel $LN134+398
	DD	imagerel $chain$4$kvz_threadqueue_init
xdata	SEGMENT
$unwind$kvz_threadqueue_stop DD 081511H
	DD	0a7415H
	DD	096415H
	DD	083415H
	DD	0e0115215H
	DD	imagerel __CxxFrameHandler4
	DD	imagerel $cppxdata$kvz_threadqueue_stop
$cppxdata$kvz_threadqueue_stop DB 028H
	DD	imagerel $stateUnwindMap$kvz_threadqueue_stop
	DD	imagerel $ip2state$kvz_threadqueue_stop
$stateUnwindMap$kvz_threadqueue_stop DB 02H
	DB	0eH
	DD	imagerel __imp___std_terminate
$ip2state$kvz_threadqueue_stop DB 06H
	DB	'N'
	DB	00H
	DB	096H
	DB	02H
	DB	'.'
	DB	00H
$cppxdata$threadqueue_worker DB 028H
	DD	imagerel $stateUnwindMap$threadqueue_worker
	DD	imagerel $ip2state$threadqueue_worker
$ip2state$threadqueue_worker DB 012H
	DB	'P'
	DB	00H
	DB	'}', 04H
	DB	02H
	DB	0b8H
	DB	00H
	DB	01H, 04H
	DB	02H
	DB	'6'
	DB	00H
	DB	'2'
	DB	02H
	DB	012H
	DB	00H
	DB	012H
	DB	02H
	DB	012H
	DB	00H
$unwind$kvz_threadqueue_free_job DD 020601H
	DD	030023206H
$chain$0$kvz_threadqueue_free_job DD 020521H
	DD	066405H
	DD	imagerel $LN68
	DD	imagerel $LN68+18
	DD	imagerel $unwind$kvz_threadqueue_free_job
$chain$1$kvz_threadqueue_free_job DD 020521H
	DD	077405H
	DD	imagerel $LN68+18
	DD	imagerel $LN68+47
	DD	imagerel $chain$0$kvz_threadqueue_free_job
$chain$2$kvz_threadqueue_free_job DD 021H
	DD	imagerel $LN68+18
	DD	imagerel $LN68+47
	DD	imagerel $chain$0$kvz_threadqueue_free_job
$chain$3$kvz_threadqueue_free_job DD 021H
	DD	imagerel $LN68
	DD	imagerel $LN68+18
	DD	imagerel $unwind$kvz_threadqueue_free_job
$unwind$kvz_threadqueue_copy_ref DD 020601H
	DD	030023206H
$unwind$kvz_threadqueue_job_dep_add DD 040a01H
	DD	06340aH
	DD	07006320aH
$unwind$threadqueue_worker DD 0a1611H
	DD	0c5416H
	DD	0b3416H
	DD	0f0123216H
	DD	0c00ee010H
	DD	0600b700cH
	DD	imagerel __CxxFrameHandler4
	DD	imagerel $cppxdata$threadqueue_worker
$stateUnwindMap$threadqueue_worker DB 02H
	DB	0eH
	DD	imagerel __imp___std_terminate
$cppxdata$kvz_threadqueue_waitfor DB 028H
	DD	imagerel $stateUnwindMap$kvz_threadqueue_waitfor
	DD	imagerel $ip2state$kvz_threadqueue_waitfor
$cppxdata$kvz_threadqueue_submit DB 028H
	DD	imagerel $stateUnwindMap$kvz_threadqueue_submit
	DD	imagerel $ip2state$kvz_threadqueue_submit
$unwind$threadqueue_pop_job DD 020601H
	DD	030023206H
$unwind$threadqueue_push_job DD 040a01H
	DD	06340aH
	DD	07006320aH
$unwind$kvz_threadqueue_job_create DD 064f01H
	DD	06344fH
	DD	07640aH
	DD	07006320aH
$unwind$kvz_threadqueue_waitfor DD 040a11H
	DD	06340aH
	DD	07006320aH
	DD	imagerel __CxxFrameHandler4
	DD	imagerel $cppxdata$kvz_threadqueue_waitfor
$stateUnwindMap$kvz_threadqueue_waitfor DB 02H
	DB	0eH
	DD	imagerel __imp___std_terminate
$ip2state$kvz_threadqueue_waitfor DB 02H
	DB	'>'
	DB	00H
$stateUnwindMap$kvz_threadqueue_submit DB 02H
	DB	0eH
	DD	imagerel __imp___std_terminate
$cppxdata$kvz_threadqueue_free DB 028H
	DD	imagerel $stateUnwindMap$kvz_threadqueue_free
	DD	imagerel $ip2state$kvz_threadqueue_free
$unwind$kvz_threadqueue_submit DD 040a11H
	DD	06340aH
	DD	07006320aH
	DD	imagerel __CxxFrameHandler4
	DD	imagerel $cppxdata$kvz_threadqueue_submit
$ip2state$kvz_threadqueue_submit DB 06H
	DB	'>'
	DB	00H
	DB	0daH
	DB	02H
	DB	'.'
	DB	00H
	ORG $+1
$unwind$kvz_threadqueue_free DD 0a2311H
	DD	0b7423H
	DD	0a6423H
	DD	095423H
	DD	083423H
	DD	0e01f5223H
	DD	imagerel __CxxFrameHandler4
	DD	imagerel $cppxdata$kvz_threadqueue_free
$stateUnwindMap$kvz_threadqueue_free DB 02H
	DB	0eH
	DD	imagerel __imp___std_terminate
$ip2state$kvz_threadqueue_free DB 06H
	DB	'j'
	DB	00H
	DB	09cH
	DB	02H
	DB	'.'
	DB	00H
	ORG $+3
$unwind$kvz_threadqueue_init DD 040801H
	DD	070045208H
	DD	030026003H
$chain$2$kvz_threadqueue_init DD 063a21H
	DD	0cf43aH
	DD	0be432H
	DD	0a5405H
	DD	imagerel $LN134
	DD	imagerel $LN134+171
	DD	imagerel $unwind$kvz_threadqueue_init
$chain$4$kvz_threadqueue_init DD 060021H
	DD	0cf400H
	DD	0be400H
	DD	0a5400H
	DD	imagerel $LN134
	DD	imagerel $LN134+171
	DD	imagerel $unwind$kvz_threadqueue_init
	ORG $+14
$SG4294966884 DB 't', 00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H
	DB	'q', 00H, 'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '-', 00H, '>'
	DB	00H, 't', 00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H
	DB	'_', 00H, 'r', 00H, 'u', 00H, 'n', 00H, 'n', 00H, 'i', 00H, 'n'
	DB	00H, 'g', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'u', 00H, 'n', 00H
	DB	't', 00H, ' ', 00H, '=', 00H, '=', 00H, ' ', 00H, '0', 00H, 00H
	DB	00H
	ORG $+2
$SG4294966885 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+6
$SG4294966903 DB 'n', 00H, 'e', 00H, 'w', 00H, '_', 00H, 'r', 00H, 'e', 00H
	DB	'f', 00H, 'c', 00H, 'o', 00H, 'u', 00H, 'n', 00H, 't', 00H, ' '
	DB	00H, '=', 00H, '=', 00H, ' ', 00H, '0', 00H, 00H, 00H
	ORG $+4
$SG4294966904 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+6
$SG4294966905 DB 'n', 00H, 'e', 00H, 'w', 00H, '_', 00H, 'r', 00H, 'e', 00H
	DB	'f', 00H, 'c', 00H, 'o', 00H, 'u', 00H, 'n', 00H, 't', 00H, ' '
	DB	00H, '>', 00H, '=', 00H, ' ', 00H, '2', 00H, 00H, 00H
	ORG $+4
$SG4294966906 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+14
$SG4294966935 DB 'j', 00H, 'o', 00H, 'b', 00H, '-', 00H, '>', 00H, 's', 00H
	DB	't', 00H, 'a', 00H, 't', 00H, 'e', 00H, ' ', 00H, '=', 00H, '='
	DB	00H, ' ', 00H, 'T', 00H, 'H', 00H, 'R', 00H, 'E', 00H, 'A', 00H
	DB	'D', 00H, 'Q', 00H, 'U', 00H, 'E', 00H, 'U', 00H, 'E', 00H, '_'
	DB	00H, 'J', 00H, 'O', 00H, 'B', 00H, '_', 00H, 'S', 00H, 'T', 00H
	DB	'A', 00H, 'T', 00H, 'E', 00H, '_', 00H, 'P', 00H, 'A', 00H, 'U'
	DB	00H, 'S', 00H, 'E', 00H, 'D', 00H, 00H, 00H
	ORG $+10
$SG4294966936 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+6
$SG4294966946 DB 'Could not alloc job!', 0aH, 00H
	ORG $+2
$SG4294966956 DB 'Could not malloc threadqueue->threads!', 0aH, 00H
$SG4294966972 DB 'd', 00H, 'e', 00H, 'p', 00H, 'j', 00H, 'o', 00H, 'b', 00H
	DB	'-', 00H, '>', 00H, 'n', 00H, 'd', 00H, 'e', 00H, 'p', 00H, 'e'
	DB	00H, 'n', 00H, 'd', 00H, 's', 00H, ' ', 00H, '>', 00H, ' ', 00H
	DB	'0', 00H, 00H, 00H
	ORG $+14
$SG4294966973 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+14
$SG4294966974 DB 'd', 00H, 'e', 00H, 'p', 00H, 'j', 00H, 'o', 00H, 'b', 00H
	DB	'-', 00H, '>', 00H, 's', 00H, 't', 00H, 'a', 00H, 't', 00H, 'e'
	DB	00H, ' ', 00H, '=', 00H, '=', 00H, ' ', 00H, 'T', 00H, 'H', 00H
	DB	'R', 00H, 'E', 00H, 'A', 00H, 'D', 00H, 'Q', 00H, 'U', 00H, 'E'
	DB	00H, 'U', 00H, 'E', 00H, '_', 00H, 'J', 00H, 'O', 00H, 'B', 00H
	DB	'_', 00H, 'S', 00H, 'T', 00H, 'A', 00H, 'T', 00H, 'E', 00H, '_'
	DB	00H, 'W', 00H, 'A', 00H, 'I', 00H, 'T', 00H, 'I', 00H, 'N', 00H
	DB	'G', 00H, ' ', 00H, '|', 00H, '|', 00H, ' ', 00H, 'd', 00H, 'e'
	DB	00H, 'p', 00H, 'j', 00H, 'o', 00H, 'b', 00H, '-', 00H, '>', 00H
	DB	's', 00H, 't', 00H, 'a', 00H, 't', 00H, 'e', 00H, ' ', 00H, '='
	DB	00H, '=', 00H, ' ', 00H, 'T', 00H, 'H', 00H, 'R', 00H, 'E', 00H
	DB	'A', 00H, 'D', 00H, 'Q', 00H, 'U', 00H, 'E', 00H, 'U', 00H, 'E'
	DB	00H, '_', 00H, 'J', 00H, 'O', 00H, 'B', 00H, '_', 00H, 'S', 00H
	DB	'T', 00H, 'A', 00H, 'T', 00H, 'E', 00H, '_', 00H, 'P', 00H, 'A'
	DB	00H, 'U', 00H, 'S', 00H, 'E', 00H, 'D', 00H, 00H, 00H
$SG4294966975 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+14
$SG4294966984 DB 'j', 00H, 'o', 00H, 'b', 00H, '-', 00H, '>', 00H, 's', 00H
	DB	't', 00H, 'a', 00H, 't', 00H, 'e', 00H, ' ', 00H, '=', 00H, '='
	DB	00H, ' ', 00H, 'T', 00H, 'H', 00H, 'R', 00H, 'E', 00H, 'A', 00H
	DB	'D', 00H, 'Q', 00H, 'U', 00H, 'E', 00H, 'U', 00H, 'E', 00H, '_'
	DB	00H, 'J', 00H, 'O', 00H, 'B', 00H, '_', 00H, 'S', 00H, 'T', 00H
	DB	'A', 00H, 'T', 00H, 'E', 00H, '_', 00H, 'R', 00H, 'U', 00H, 'N'
	DB	00H, 'N', 00H, 'I', 00H, 'N', 00H, 'G', 00H, 00H, 00H
	ORG $+8
$SG4294966985 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+14
$SG4294967002 DB 'j', 00H, 'o', 00H, 'b', 00H, '-', 00H, '>', 00H, 's', 00H
	DB	't', 00H, 'a', 00H, 't', 00H, 'e', 00H, ' ', 00H, '=', 00H, '='
	DB	00H, ' ', 00H, 'T', 00H, 'H', 00H, 'R', 00H, 'E', 00H, 'A', 00H
	DB	'D', 00H, 'Q', 00H, 'U', 00H, 'E', 00H, 'U', 00H, 'E', 00H, '_'
	DB	00H, 'J', 00H, 'O', 00H, 'B', 00H, '_', 00H, 'S', 00H, 'T', 00H
	DB	'A', 00H, 'T', 00H, 'E', 00H, '_', 00H, 'R', 00H, 'E', 00H, 'A'
	DB	00H, 'D', 00H, 'Y', 00H, 00H, 00H
	ORG $+12
$SG4294967003 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+6
$SG4294967017 DB 't', 00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H
	DB	'q', 00H, 'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '-', 00H, '>'
	DB	00H, 'f', 00H, 'i', 00H, 'r', 00H, 's', 00H, 't', 00H, ' ', 00H
	DB	'!', 00H, '=', 00H, ' ', 00H, 'N', 00H, 'U', 00H, 'L', 00H, 'L'
	DB	00H, 00H, 00H
	ORG $+2
$SG4294967018 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
	ORG $+6
$SG4294967019 DB 'j', 00H, 'o', 00H, 'b', 00H, '-', 00H, '>', 00H, 'n', 00H
	DB	'd', 00H, 'e', 00H, 'p', 00H, 'e', 00H, 'n', 00H, 'd', 00H, 's'
	DB	00H, ' ', 00H, '=', 00H, '=', 00H, ' ', 00H, '0', 00H, 00H, 00H
	ORG $+2
$SG4294967020 DB 'C', 00H, ':', 00H, '\', 00H, 'U', 00H, 's', 00H, 'e', 00H
	DB	'r', 00H, 's', 00H, '\', 00H, '8', 00H, '4', 00H, '0', 00H, '3'
	DB	00H, '8', 00H, '\', 00H, 'D', 00H, 'e', 00H, 's', 00H, 'k', 00H
	DB	't', 00H, 'o', 00H, 'p', 00H, '\', 00H, 'v', 00H, 'i', 00H, 'd'
	DB	00H, 'e', 00H, 'o', 00H, '_', 00H, 'c', 00H, 'o', 00H, 'd', 00H
	DB	'e', 00H, 'c', 00H, '_', 00H, 't', 00H, 'h', 00H, 'r', 00H, 'e'
	DB	00H, 'a', 00H, 'd', 00H, '_', 00H, 't', 00H, 'e', 00H, 's', 00H
	DB	't', 00H, '\', 00H, 's', 00H, 'r', 00H, 'c', 00H, '\', 00H, 't'
	DB	00H, 'h', 00H, 'r', 00H, 'e', 00H, 'a', 00H, 'd', 00H, 'q', 00H
	DB	'u', 00H, 'e', 00H, 'u', 00H, 'e', 00H, '.', 00H, 'c', 00H, 00H
	DB	00H
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\memory
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\memory
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\tuple
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
thread_count$dead$ = 80
kvz_threadqueue_init PROC

; 369  : {

$LN134:
	push	rbx
	push	rsi
	push	rdi
	sub	rsp, 48					; 00000030H

; 370  :   threadqueue_queue_t *threadqueue = MALLOC(threadqueue_queue_t, 1);

	mov	ecx, 64					; 00000040H
	call	QWORD PTR __imp_malloc
	mov	rbx, rax

; 371  :   if (!threadqueue) {

	test	rax, rax
	je	SHORT $failed$135
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 81   :     *mutex = new std::mutex();

	mov	ecx, 80					; 00000050H
	call	??2@YAPEAX_K@Z				; operator new
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 40   :         _Mtx_init_in_situ(_Mymtx(), _Flags | _Mtx_try);

	mov	edx, 2
	mov	rcx, rax
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 81   :     *mutex = new std::mutex();

	mov	rsi, rax
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 40   :         _Mtx_init_in_situ(_Mymtx(), _Flags | _Mtx_try);

	call	QWORD PTR __imp__Mtx_init_in_situ
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 40   :     *cond = new std::condition_variable();

	mov	ecx, 72					; 00000048H

; 81   :     *mutex = new std::mutex();

	mov	QWORD PTR [rbx], rsi

; 40   :     *cond = new std::condition_variable();

	call	??2@YAPEAX_K@Z				; operator new
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 578  :         _Cnd_init_in_situ(_Mycnd());

	mov	rcx, rax
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 40   :     *cond = new std::condition_variable();

	mov	rdi, rax
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 578  :         _Cnd_init_in_situ(_Mycnd());

	call	QWORD PTR __imp__Cnd_init_in_situ
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 40   :     *cond = new std::condition_variable();

	mov	ecx, 72					; 00000048H
	mov	QWORD PTR [rbx+8], rdi
	call	??2@YAPEAX_K@Z				; operator new
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 578  :         _Cnd_init_in_situ(_Mycnd());

	mov	rcx, rax
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 40   :     *cond = new std::condition_variable();

	mov	rdi, rax
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 578  :         _Cnd_init_in_situ(_Mycnd());

	call	QWORD PTR __imp__Cnd_init_in_situ
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 390  :   threadqueue->threads = MALLOC(pthread_t, thread_count);

	mov	ecx, 32					; 00000020H
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 40   :     *cond = new std::condition_variable();

	mov	QWORD PTR [rbx+16], rdi
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 390  :   threadqueue->threads = MALLOC(pthread_t, thread_count);

	call	QWORD PTR __imp_malloc
	mov	QWORD PTR [rbx+24], rax

; 391  :   if (!threadqueue->threads) {

	test	rax, rax
	jne	SHORT $LN9@kvz_thread

; 392  :     fprintf(stderr, "Could not malloc threadqueue->threads!\n");

	lea	ecx, QWORD PTR [rax+2]
	call	QWORD PTR __imp___acrt_iob_func
	mov	rcx, rax
	lea	rdx, OFFSET FLAT:$SG4294966956
	call	fprintf
$failed$135:

; 416  : 
; 417  : failed:
; 418  :   kvz_threadqueue_free(threadqueue);

	mov	rcx, rbx
	call	kvz_threadqueue_free

; 419  :   return NULL;

	xor	eax, eax

; 420  : }

	add	rsp, 48					; 00000030H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
$LN9@kvz_thread:
	mov	QWORD PTR [rsp+80], rbp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, rsi
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 395  :   threadqueue->thread_count = 0;

	xor	ebp, ebp
	mov	QWORD PTR [rbx+32], rbp

; 396  :   threadqueue->thread_running_count = 0;
; 397  : 
; 398  :   threadqueue->stop = false;

	mov	BYTE PTR [rbx+40], bpl

; 399  : 
; 400  :   threadqueue->first              = NULL;

	mov	QWORD PTR [rbx+48], rbp

; 401  :   threadqueue->last               = NULL;

	mov	QWORD PTR [rbx+56], rbp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN42@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN42@kvz_thread:
	mov	QWORD PTR [rsp+88], r14
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 405  :   for (int i = 0; i < thread_count; i++) {

	mov	rdi, rbp
	mov	QWORD PTR [rsp+96], r15
	lea	r15, OFFSET FLAT:threadqueue_worker
	npad	4
$LL4@kvz_thread:

; 406  :     if (pthread_create(&threadqueue->threads[i], NULL, threadqueue_worker, threadqueue) != 0) {

	mov	r14, QWORD PTR [rbx+24]
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 58   :     *thread = new std::thread(executee, arg);

	mov	ecx, 16
	call	??2@YAPEAX_K@Z				; operator new
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\memory

; 2068 :     return unique_ptr<_Ty>(new _Ty(_STD forward<_Types>(_Args)...));

	mov	ecx, 16
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 58   :     *thread = new std::thread(executee, arg);

	mov	rsi, rax
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\memory

; 2068 :     return unique_ptr<_Ty>(new _Ty(_STD forward<_Types>(_Args)...));

	call	??2@YAPEAX_K@Z				; operator new
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread

; 64   :         _Thr._Hnd =

	lea	rcx, QWORD PTR [rsi+8]
	mov	r9, rax
	mov	QWORD PTR [rsp+40], rcx
	lea	r8, OFFSET FLAT:??$_Invoke@V?$tuple@P6APEAXPEAX@ZPEAX@std@@$0A@$00@thread@std@@CAIPEAX@Z ; std::thread::_Invoke<std::tuple<void * (__cdecl*)(void *),void *>,0,1>
	xor	ecx, ecx
	mov	DWORD PTR [rsp+32], ebp
	xor	edx, edx
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\tuple

; 163  :     constexpr _Tuple_val(_Other&& _Arg) : _Val(_STD forward<_Other>(_Arg)) {}

	mov	QWORD PTR [rax], rbx
	mov	QWORD PTR [rax+8], r15
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread

; 64   :         _Thr._Hnd =

	call	QWORD PTR __imp__beginthreadex
	mov	QWORD PTR [rsi], rax

; 65   :             reinterpret_cast<void*>(_CSTD _beginthreadex(nullptr, 0, _Invoker_proc, _Decay_copied.get(), 0, &_Thr._Id));
; 66   : #pragma warning(pop)
; 67   : 
; 68   :         if (_Thr._Hnd) { // ownership transferred to the thread

	test	rax, rax
	je	SHORT $LN52@kvz_thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 58   :     *thread = new std::thread(executee, arg);

	mov	QWORD PTR [r14+rdi], rsi
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 405  :   for (int i = 0; i < thread_count; i++) {

	add	rdi, 8

; 407  :         fprintf(stderr, "pthread_create failed!\n");
; 408  :         goto failed;
; 409  :     }
; 410  :     threadqueue->thread_count++;

	inc	DWORD PTR [rbx+32]

; 411  :     threadqueue->thread_running_count++;

	inc	DWORD PTR [rbx+36]
	cmp	rdi, 32					; 00000020H
	jl	SHORT $LL4@kvz_thread
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN119@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN119@kvz_thread:
	mov	r14, QWORD PTR [rsp+88]
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 415  :   return threadqueue;

	mov	rax, rbx
	mov	r15, QWORD PTR [rsp+96]
	mov	rbp, QWORD PTR [rsp+80]

; 420  : }

	add	rsp, 48					; 00000030H
	pop	rdi
	pop	rsi
	pop	rbx
	ret	0
$LN52@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread

; 72   :             _Throw_Cpp_error(_RESOURCE_UNAVAILABLE_TRY_AGAIN);

	mov	ecx, 6
	mov	DWORD PTR [rsi+8], ebp
	call	QWORD PTR __imp_?_Throw_Cpp_error@std@@YAXH@Z
	int	3
$LN131@kvz_thread:
kvz_threadqueue_init ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
$T1 = 32
threadqueue$ = 64
kvz_threadqueue_free PROC

; 630  : {

$LN132:

; 631  :   if (threadqueue == NULL) return;

	test	rcx, rcx
	je	$LN129@kvz_thread
	mov	QWORD PTR [rsp+8], rbx
	mov	QWORD PTR [rsp+16], rbp
	mov	QWORD PTR [rsp+24], rsi
	mov	QWORD PTR [rsp+32], rdi
	push	r14
	sub	rsp, 48					; 00000030H

; 630  : {

	mov	rdi, rcx
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rcx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN30@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN30@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 600  :   if (threadqueue->stop) {

	xor	r14d, r14d
	cmp	BYTE PTR [rdi+40], r14b
	je	SHORT $LN14@kvz_thread

; 601  :     // The threadqueue should have stopped already.
; 602  :     assert(threadqueue->thread_running_count == 0);

	cmp	DWORD PTR [rdi+36], r14d
	je	SHORT $LN21@kvz_thread
	mov	r8d, 602				; 0000025aH
	lea	rdx, OFFSET FLAT:$SG4294966885
	lea	rcx, OFFSET FLAT:$SG4294966884
	call	QWORD PTR __imp__wassert
$LN21@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	$LN116@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN14@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 608  :   threadqueue->stop = true;

	mov	BYTE PTR [rdi+40], 1
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 593  :         _Check_C_return(_Cnd_broadcast(_Mycnd()));

	mov	rcx, QWORD PTR [rdi+8]
	call	QWORD PTR __imp__Cnd_broadcast
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN50@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	npad	1
$LN50@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN59@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN59@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 613  :   for (int i = 0; i < threadqueue->thread_count; i++) {

	mov	ebp, r14d
	cmp	DWORD PTR [rdi+32], r14d
	jle	SHORT $LN116@kvz_thread
	mov	rsi, r14
	npad	4
$LL12@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 68   :     std::thread* real_thread = static_cast<std::thread*>(thread);

	mov	rax, QWORD PTR [rdi+24]
	mov	rbx, QWORD PTR [rsi+rax]
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread

; 101  :         return _Thr._Id != 0;

	cmp	DWORD PTR [rbx+8], 0

; 105  :         if (!joinable()) {

	je	$LN117@kvz_thread

; 107  :         }
; 108  : 
; 109  :         if (_Thr._Id == _Thrd_id()) {

	call	QWORD PTR __imp__Thrd_id
	cmp	DWORD PTR [rbx+8], eax
	je	$LN118@kvz_thread

; 111  :         }
; 112  : 
; 113  :         if (_Thrd_join(_Thr, nullptr) != _Thrd_success) {

	movups	xmm0, XMMWORD PTR [rbx]
	movaps	XMMWORD PTR $T1[rsp], xmm0
	xor	edx, edx
	lea	rcx, QWORD PTR $T1[rsp]
	call	QWORD PTR __imp__Thrd_join
	test	eax, eax
	jne	$LN119@kvz_thread
	xorps	xmm0, xmm0

; 115  :         }
; 116  : 
; 117  :         _Thr = {};

	movups	XMMWORD PTR [rbx], xmm0

; 101  :         return _Thr._Id != 0;

	cmp	DWORD PTR [rbx+8], eax

; 77   :         if (joinable()) {

	jne	$LN120@kvz_thread
	lea	edx, QWORD PTR [rax+16]
	mov	rcx, rbx
	call	??3@YAXPEAX_K@Z				; operator delete
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 613  :   for (int i = 0; i < threadqueue->thread_count; i++) {

	inc	ebp
	add	rsi, 8
	cmp	ebp, DWORD PTR [rdi+32]
	jl	SHORT $LL12@kvz_thread
$LN116@kvz_thread:

; 632  : 
; 633  :   kvz_threadqueue_stop(threadqueue);
; 634  : 
; 635  :   // Free all jobs.
; 636  :   while (threadqueue->first) {

	cmp	QWORD PTR [rdi+48], 0
	je	SHORT $LN3@kvz_thread
	npad	6
$LL2@kvz_thread:

; 637  :     threadqueue_job_t *next = threadqueue->first->next;

	mov	rax, QWORD PTR [rdi+48]
	mov	rbx, QWORD PTR [rax+56]

; 638  :     kvz_threadqueue_free_job(&threadqueue->first);

	lea	rcx, QWORD PTR [rdi+48]
	call	kvz_threadqueue_free_job

; 639  :     threadqueue->first = next;

	mov	QWORD PTR [rdi+48], rbx

; 632  : 
; 633  :   kvz_threadqueue_stop(threadqueue);
; 634  : 
; 635  :   // Free all jobs.
; 636  :   while (threadqueue->first) {

	test	rbx, rbx
	jne	SHORT $LL2@kvz_thread
$LN3@kvz_thread:

; 640  :   }
; 641  :   threadqueue->last = NULL;

	mov	QWORD PTR [rdi+56], r14

; 642  : 
; 643  :   FREE_POINTER(threadqueue->threads);

	mov	rcx, QWORD PTR [rdi+24]
	call	QWORD PTR __imp_free
	mov	QWORD PTR [rdi+24], r14

; 644  :   threadqueue->thread_count = 0;

	mov	DWORD PTR [rdi+32], r14d
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 75   :     delete static_cast<std::mutex*>(*mutex);

	mov	rbx, QWORD PTR [rdi]
	test	rbx, rbx
	je	SHORT $LN90@kvz_thread
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 44   :         _Mtx_destroy_in_situ(_Mymtx());

	mov	rcx, rbx
	call	QWORD PTR __imp__Mtx_destroy_in_situ
	mov	edx, 80					; 00000050H
	mov	rcx, rbx
	call	??3@YAXPEAX_K@Z				; operator delete
$LN90@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 76   :     *mutex = nullptr;

	mov	QWORD PTR [rdi], r14

; 34   :     delete static_cast<std::condition_variable*>(*cond);

	mov	rbx, QWORD PTR [rdi+8]
	test	rbx, rbx
	je	SHORT $LN102@kvz_thread
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 582  :         _Cnd_destroy_in_situ(_Mycnd());

	mov	rcx, rbx
	call	QWORD PTR __imp__Cnd_destroy_in_situ
	mov	edx, 72					; 00000048H
	mov	rcx, rbx
	call	??3@YAXPEAX_K@Z				; operator delete
$LN102@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 35   :     *cond = nullptr;

	mov	QWORD PTR [rdi+8], r14

; 34   :     delete static_cast<std::condition_variable*>(*cond);

	mov	rbx, QWORD PTR [rdi+16]
	test	rbx, rbx
	je	SHORT $LN111@kvz_thread
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 582  :         _Cnd_destroy_in_situ(_Mycnd());

	mov	rcx, rbx
	call	QWORD PTR __imp__Cnd_destroy_in_situ
	mov	edx, 72					; 00000048H
	mov	rcx, rbx
	call	??3@YAXPEAX_K@Z				; operator delete
$LN111@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 35   :     *cond = nullptr;

	mov	QWORD PTR [rdi+16], r14
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 658  :   FREE_POINTER(threadqueue);

	mov	rcx, rdi
	call	QWORD PTR __imp_free

; 659  : }

	mov	rbx, QWORD PTR [rsp+64]
	mov	rbp, QWORD PTR [rsp+72]
	mov	rsi, QWORD PTR [rsp+80]
	mov	rdi, QWORD PTR [rsp+88]
	add	rsp, 48					; 00000030H
	pop	r14
$LN129@kvz_thread:
	ret	0
$LN120@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread

; 78   :             _STD terminate();

	call	QWORD PTR __imp_terminate
	int	3
$LN119@kvz_thread:

; 114  :             _Throw_Cpp_error(_NO_SUCH_PROCESS);

	mov	ecx, 2
	call	QWORD PTR __imp_?_Throw_Cpp_error@std@@YAXH@Z
	int	3
$LN118@kvz_thread:

; 110  :             _Throw_Cpp_error(_RESOURCE_DEADLOCK_WOULD_OCCUR);

	mov	ecx, 5
	call	QWORD PTR __imp_?_Throw_Cpp_error@std@@YAXH@Z
	int	3
$LN117@kvz_thread:

; 106  :             _Throw_Cpp_error(_INVALID_ARGUMENT);

	mov	ecx, 1
	call	QWORD PTR __imp_?_Throw_Cpp_error@std@@YAXH@Z
	int	3
$LN128@kvz_thread:
kvz_threadqueue_free ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
threadqueue$ = 48
job$ = 56
kvz_threadqueue_submit PROC

; 458  : {

$LN66:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rbx, rdx
	mov	rdi, rcx
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rcx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN21@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN21@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN31@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN31@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 461  :   assert(job->state == THREADQUEUE_JOB_STATE_PAUSED);

	cmp	DWORD PTR [rbx+8], 0
	je	SHORT $LN13@kvz_thread
	mov	r8d, 461				; 000001cdH
	lea	rdx, OFFSET FLAT:$SG4294966936
	lea	rcx, OFFSET FLAT:$SG4294966935
	call	QWORD PTR __imp__wassert
$LN13@kvz_thread:

; 462  : 
; 463  :   if (threadqueue->thread_count == 0) 

	cmp	DWORD PTR [rdi+32], 0
	jne	SHORT $LN4@kvz_thread

; 464  :   {
; 465  :     // When not using threads, run the job immediately.
; 466  :     job->fptr(job->arg);

	mov	rcx, QWORD PTR [rbx+48]
	call	QWORD PTR [rbx+40]

; 467  :     job->state = THREADQUEUE_JOB_STATE_DONE;

	mov	DWORD PTR [rbx+8], 4

; 468  :   } 

	jmp	SHORT $LN7@kvz_thread
$LN4@kvz_thread:

; 469  :   else if (job->ndepends == 0) 

	cmp	DWORD PTR [rbx+12], 0
	jne	SHORT $LN6@kvz_thread

; 470  :   {
; 471  :     threadqueue_push_job(threadqueue, kvz_threadqueue_copy_ref(job));

	mov	rcx, rbx
	call	kvz_threadqueue_copy_ref
	mov	rdx, rax
	mov	rcx, rdi
	call	threadqueue_push_job
	npad	1
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 589  :         _Check_C_return(_Cnd_signal(_Mycnd()));

	mov	rcx, QWORD PTR [rdi+8]
	call	QWORD PTR __imp__Cnd_signal
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN41@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	npad	1
$LN41@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 473  :   } 

	jmp	SHORT $LN7@kvz_thread
$LN6@kvz_thread:

; 474  :   else 
; 475  :   {
; 476  :     job->state = THREADQUEUE_JOB_STATE_WAITING;

	mov	DWORD PTR [rbx+8], 1
$LN7@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN50@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN50@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN59@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN59@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 481  :   return 1;

	mov	eax, 1

; 482  : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN63@kvz_thread:
kvz_threadqueue_submit ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
threadqueue$ = 48
job$ = 56
kvz_threadqueue_waitfor PROC

; 578  : {

$LN63:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rbx, rdx
	mov	rdi, rcx
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rdx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN16@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN16@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 580  :   while (job->state != THREADQUEUE_JOB_STATE_DONE) {

	cmp	DWORD PTR [rbx+8], 4
	je	SHORT $LN3@kvz_thread
	npad	4
$LL2@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 598  :         _Check_C_return(_Cnd_wait(_Mycnd(), _Lck.mutex()->_Mymtx()));

	mov	rdx, QWORD PTR [rbx]
	mov	rcx, QWORD PTR [rdi+16]
	call	QWORD PTR __imp__Cnd_wait
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	SHORT $LN55@kvz_thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 580  :   while (job->state != THREADQUEUE_JOB_STATE_DONE) {

	cmp	DWORD PTR [rbx+8], 4
	jne	SHORT $LL2@kvz_thread
$LN3@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN50@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN55@kvz_thread:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN50@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 585  :   return 1;

	mov	eax, 1

; 586  : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN60@kvz_thread:
kvz_threadqueue_waitfor ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
fptr$dead$ = 48
arg$ = 56
kvz_threadqueue_job_create PROC

; 432  : {

$LN16:
	mov	QWORD PTR [rsp+16], rsi
	push	rdi
	sub	rsp, 32					; 00000020H

; 433  :   threadqueue_job_t *job = MALLOC(threadqueue_job_t, 1);

	mov	ecx, 64					; 00000040H
	mov	rsi, rdx
	call	QWORD PTR __imp_malloc
	mov	rdi, rax

; 434  :   if (!job) {

	test	rax, rax
	jne	SHORT $LN2@kvz_thread

; 435  :     fprintf(stderr, "Could not alloc job!\n");

	lea	ecx, QWORD PTR [rax+2]
	call	QWORD PTR __imp___acrt_iob_func
	mov	rcx, rax
	lea	rdx, OFFSET FLAT:$SG4294966946
	call	fprintf

; 436  :     return NULL;

	xor	eax, eax

; 454  : }

	mov	rsi, QWORD PTR [rsp+56]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN2@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 81   :     *mutex = new std::mutex();

	mov	ecx, 80					; 00000050H
	mov	QWORD PTR [rsp+48], rbx
	call	??2@YAPEAX_K@Z				; operator new
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 40   :         _Mtx_init_in_situ(_Mymtx(), _Flags | _Mtx_try);

	mov	edx, 2
	mov	rcx, rax
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 81   :     *mutex = new std::mutex();

	mov	rbx, rax
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 40   :         _Mtx_init_in_situ(_Mymtx(), _Flags | _Mtx_try);

	call	QWORD PTR __imp__Mtx_init_in_situ
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 444  :   job->state = THREADQUEUE_JOB_STATE_PAUSED;

	xor	eax, eax
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 81   :     *mutex = new std::mutex();

	mov	QWORD PTR [rdi], rbx
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 453  :   return job;

	mov	rbx, QWORD PTR [rsp+48]
	mov	QWORD PTR [rdi+8], rax
	mov	QWORD PTR [rdi+16], rax
	mov	QWORD PTR [rdi+24], rax
	lea	rax, OFFSET FLAT:task_test
	mov	QWORD PTR [rdi+40], rax
	mov	rax, rdi
	mov	QWORD PTR [rdi+48], rsi

; 454  : }

	mov	rsi, QWORD PTR [rsp+56]
	mov	DWORD PTR [rdi+32], 1
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
kvz_threadqueue_job_create ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
threadqueue$ = 48
job$ = 56
threadqueue_push_job PROC

; 240  : {

	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H

; 241  :   assert(job->ndepends == 0);

	cmp	DWORD PTR [rdx+12], 0
	mov	rbx, rdx
	mov	rdi, rcx
	je	SHORT $LN5@threadqueu
	mov	r8d, 241				; 000000f1H
	lea	rdx, OFFSET FLAT:$SG4294967020
	lea	rcx, OFFSET FLAT:$SG4294967019
	call	QWORD PTR __imp__wassert
$LN5@threadqueu:

; 242  :   job->state = THREADQUEUE_JOB_STATE_READY;

	mov	DWORD PTR [rbx+8], 2

; 243  : 
; 244  :   if (threadqueue->first == NULL) //job

	cmp	QWORD PTR [rdi+48], 0
	jne	SHORT $LN2@threadqueu

; 245  :   {
; 246  :     threadqueue->first = job;

	mov	QWORD PTR [rdi+48], rbx

; 247  :   } 

	jmp	SHORT $LN6@threadqueu
$LN2@threadqueu:

; 248  :   else 
; 249  :   {
; 250  :     threadqueue->last->next = job;//

	mov	rax, QWORD PTR [rdi+56]
	mov	QWORD PTR [rax+56], rbx
$LN6@threadqueu:

; 251  :   }
; 252  : 
; 253  :   threadqueue->last = job;
; 254  :   job->next = NULL;
; 255  : }

	mov	QWORD PTR [rdi+56], rbx
	mov	QWORD PTR [rbx+56], 0
	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
threadqueue_push_job ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
threadqueue$ = 48
threadqueue_pop_job PROC

; 265  : {

	push	rbx
	sub	rsp, 32					; 00000020H

; 266  :   assert(threadqueue->first != NULL);

	mov	rax, QWORD PTR [rcx+48]
	mov	rbx, rcx
	test	rax, rax
	jne	SHORT $LN4@threadqueu
	mov	r8d, 266				; 0000010aH
	lea	rdx, OFFSET FLAT:$SG4294967018
	lea	rcx, OFFSET FLAT:$SG4294967017
	call	QWORD PTR __imp__wassert
	mov	rax, QWORD PTR [rbx+48]
$LN4@threadqueu:

; 267  : 
; 268  :   threadqueue_job_t *job = threadqueue->first;
; 269  :   threadqueue->first = job->next;

	mov	rcx, QWORD PTR [rax+56]
	mov	QWORD PTR [rbx+48], rcx

; 270  :   job->next = NULL;

	xor	ecx, ecx
	mov	QWORD PTR [rax+56], rcx

; 271  : 
; 272  :   if (threadqueue->first == NULL) {

	cmp	QWORD PTR [rbx+48], rcx
	jne	SHORT $LN5@threadqueu

; 273  :     threadqueue->last = NULL;

	mov	QWORD PTR [rbx+56], rcx
$LN5@threadqueu:

; 274  :   }
; 275  : 
; 276  :   return job;
; 277  : }

	add	rsp, 32					; 00000020H
	pop	rbx
	ret	0
threadqueue_pop_job ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
job$1 = 80
threadqueue_opaque$ = 80
threadqueue_worker PROC

; 284  : {

	mov	QWORD PTR [rsp+16], rbx
	mov	QWORD PTR [rsp+24], rbp
	push	rsi
	push	rdi
	push	r12
	push	r14
	push	r15
	sub	rsp, 32					; 00000020H
	mov	rdi, rcx
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rcx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN49@threadqueu

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN49@threadqueu:
	xor	r12d, r12d
$LL2@threadqueu:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 291  :     while (!threadqueue->stop && threadqueue->first == NULL) {

	cmp	BYTE PTR [rdi+40], 0
	jne	$LN204@threadqueu
	cmp	QWORD PTR [rdi+48], 0
	jne	SHORT $LN241@threadqueu
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 598  :         _Check_C_return(_Cnd_wait(_Mycnd(), _Lck.mutex()->_Mymtx()));

	mov	rdx, QWORD PTR [rdi]
	mov	rcx, QWORD PTR [rdi+8]
	call	QWORD PTR __imp__Cnd_wait
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN196@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 291  :     while (!threadqueue->stop && threadqueue->first == NULL) {

	jmp	SHORT $LL2@threadqueu
$LN241@threadqueu:

; 266  :   assert(threadqueue->first != NULL);

	mov	rsi, QWORD PTR [rdi+48]
	test	rsi, rsi
	jne	SHORT $LN81@threadqueu
	mov	r8d, 266				; 0000010aH
	lea	rdx, OFFSET FLAT:$SG4294967018
	lea	rcx, OFFSET FLAT:$SG4294967017
	call	QWORD PTR __imp__wassert
	mov	rsi, QWORD PTR [rdi+48]
$LN81@threadqueu:

; 267  : 
; 268  :   threadqueue_job_t *job = threadqueue->first;
; 269  :   threadqueue->first = job->next;

	mov	rax, QWORD PTR [rsi+56]
	mov	QWORD PTR [rdi+48], rax

; 270  :   job->next = NULL;

	mov	QWORD PTR [rsi+56], r12

; 271  : 
; 272  :   if (threadqueue->first == NULL) {

	cmp	QWORD PTR [rdi+48], 0
	jne	SHORT $LN79@threadqueu

; 273  :     threadqueue->last = NULL;

	mov	QWORD PTR [rdi+56], r12
$LN79@threadqueu:

; 292  :       // Wait until there is something to do in the queue.
; 293  :       PTHREAD_COND_WAIT(&threadqueue->job_available, &threadqueue->lock);
; 294  :     }
; 295  : 
; 296  :     if (threadqueue->stop) 
; 297  :     {
; 298  :         //printf("threadqueue need stop !!!\n");
; 299  :         break;
; 300  :     }
; 301  : 
; 302  :     // Get a job and remove it from the queue.
; 303  :     threadqueue_job_t *job = threadqueue_pop_job(threadqueue);

	mov	QWORD PTR job$1[rsp], rsi
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rsi]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN205@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 306  :     assert(job->state == THREADQUEUE_JOB_STATE_READY);

	cmp	DWORD PTR [rsi+8], 2
	je	SHORT $LN31@threadqueu
	mov	r8d, 306				; 00000132H
	lea	rdx, OFFSET FLAT:$SG4294967003
	lea	rcx, OFFSET FLAT:$SG4294967002
	call	QWORD PTR __imp__wassert
$LN31@threadqueu:

; 307  :     job->state = THREADQUEUE_JOB_STATE_RUNNING;

	mov	DWORD PTR [rsi+8], 3
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rsi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN207@threadqueu
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN209@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 311  :     job->fptr(job->arg);

	mov	rcx, QWORD PTR [rsi+48]
	call	QWORD PTR [rsi+40]
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN211@threadqueu
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rsi]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN213@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 315  :     assert(job->state == THREADQUEUE_JOB_STATE_RUNNING);

	cmp	DWORD PTR [rsi+8], 3
	je	SHORT $LN36@threadqueu
	mov	r8d, 315				; 0000013bH
	lea	rdx, OFFSET FLAT:$SG4294966985
	lea	rcx, OFFSET FLAT:$SG4294966984
	call	QWORD PTR __imp__wassert
$LN36@threadqueu:

; 316  :     job->state = THREADQUEUE_JOB_STATE_DONE;

	mov	DWORD PTR [rsi+8], 4
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 589  :         _Check_C_return(_Cnd_signal(_Mycnd()));

	mov	rcx, QWORD PTR [rdi+16]
	call	QWORD PTR __imp__Cnd_signal
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN215@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 323  :     int num_new_jobs = 0;

	mov	r15d, r12d

; 324  :     for (int i = 0; i < job->rdepends_count; ++i) {

	mov	ebp, r12d
	cmp	DWORD PTR [rsi+24], r12d
	jle	$LN8@threadqueu
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 590  :     }

	mov	r14, r12
	npad	4
$LL9@threadqueu:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 325  :       threadqueue_job_t * const depjob = job->rdepends[i];

	mov	rbx, QWORD PTR [rsi+16]
	mov	rbx, QWORD PTR [r14+rbx]
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	$LN199@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 330  :       assert(depjob->state == THREADQUEUE_JOB_STATE_WAITING ||

	cmp	DWORD PTR [rbx+8], 1
	jbe	SHORT $LN39@threadqueu
	mov	r8d, 331				; 0000014bH
	lea	rdx, OFFSET FLAT:$SG4294966975
	lea	rcx, OFFSET FLAT:$SG4294966974
	call	QWORD PTR __imp__wassert
$LN39@threadqueu:

; 331  :              depjob->state == THREADQUEUE_JOB_STATE_PAUSED);
; 332  :       assert(depjob->ndepends > 0);

	mov	eax, DWORD PTR [rbx+12]
	test	eax, eax
	jg	SHORT $LN40@threadqueu
	mov	r8d, 332				; 0000014cH
	lea	rdx, OFFSET FLAT:$SG4294966973
	lea	rcx, OFFSET FLAT:$SG4294966972
	call	QWORD PTR __imp__wassert
	mov	eax, DWORD PTR [rbx+12]
$LN40@threadqueu:

; 333  :       depjob->ndepends--;

	sub	eax, 1
	mov	DWORD PTR [rbx+12], eax

; 334  : 
; 335  :       if (depjob->ndepends == 0 && depjob->state == THREADQUEUE_JOB_STATE_WAITING) {

	jne	SHORT $LN23@threadqueu
	cmp	DWORD PTR [rbx+8], 1
	jne	SHORT $LN23@threadqueu

; 531  :   int32_t new_refcount = KVZ_ATOMIC_INC(&job->refcount);

	mov	eax, 1
	lock xadd DWORD PTR [rbx+32], eax
	inc	eax

; 532  :   // The caller should have had another reference and we added one
; 533  :   // reference so refcount should be at least 2.
; 534  :   assert(new_refcount >= 2);

	cmp	eax, 2
	jge	SHORT $LN148@threadqueu
	mov	r8d, 534				; 00000216H
	lea	rdx, OFFSET FLAT:$SG4294966906
	lea	rcx, OFFSET FLAT:$SG4294966905
	call	QWORD PTR __imp__wassert
$LN148@threadqueu:

; 241  :   assert(job->ndepends == 0);

	cmp	DWORD PTR [rbx+12], 0
	je	SHORT $LN153@threadqueu
	mov	r8d, 241				; 000000f1H
	lea	rdx, OFFSET FLAT:$SG4294967020
	lea	rcx, OFFSET FLAT:$SG4294967019
	call	QWORD PTR __imp__wassert
$LN153@threadqueu:

; 242  :   job->state = THREADQUEUE_JOB_STATE_READY;

	mov	DWORD PTR [rbx+8], 2

; 243  : 
; 244  :   if (threadqueue->first == NULL) //job

	cmp	QWORD PTR [rdi+48], 0
	jne	SHORT $LN150@threadqueu

; 245  :   {
; 246  :     threadqueue->first = job;

	mov	QWORD PTR [rdi+48], rbx

; 247  :   } 

	jmp	SHORT $LN151@threadqueu
$LN150@threadqueu:

; 248  :   else 
; 249  :   {
; 250  :     threadqueue->last->next = job;//

	mov	rax, QWORD PTR [rdi+56]
	mov	QWORD PTR [rax+56], rbx
$LN151@threadqueu:

; 251  :   }
; 252  : 
; 253  :   threadqueue->last = job;

	mov	QWORD PTR [rdi+56], rbx

; 254  :   job->next = NULL;

	mov	QWORD PTR [rbx+56], r12

; 336  :         // Move the job to ready jobs.
; 337  :         threadqueue_push_job(threadqueue, kvz_threadqueue_copy_ref(depjob));
; 338  :         num_new_jobs++;

	inc	r15d
$LN23@threadqueu:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	SHORT $LN201@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 343  :       kvz_threadqueue_free_job(&job->rdepends[i]);

	movsxd	rcx, ebp
	mov	rax, QWORD PTR [rsi+16]
	lea	rcx, QWORD PTR [rax+rcx*8]
	call	kvz_threadqueue_free_job

; 324  :     for (int i = 0; i < job->rdepends_count; ++i) {

	inc	ebp
	add	r14, 8
	cmp	ebp, DWORD PTR [rsi+24]
	jl	$LL9@threadqueu
$LN8@threadqueu:

; 344  :     }
; 345  :     job->rdepends_count = 0;

	mov	DWORD PTR [rsi+24], r12d
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rsi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	SHORT $LN217@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 348  :     kvz_threadqueue_free_job(&job);

	lea	rcx, QWORD PTR job$1[rsp]
	call	kvz_threadqueue_free_job

; 352  :     for (int i = 0; i < num_new_jobs - 1; i++) {

	mov	ebx, r12d
	lea	esi, DWORD PTR [r15-1]
	test	esi, esi
	jle	$LL2@threadqueu
$LL12@threadqueu:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 589  :         _Check_C_return(_Cnd_signal(_Mycnd()));

	mov	rcx, QWORD PTR [rdi+8]
	call	QWORD PTR __imp__Cnd_signal
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	jne	SHORT $LN203@threadqueu
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 352  :     for (int i = 0; i < num_new_jobs - 1; i++) {

	inc	ebx
	cmp	ebx, esi
	jl	SHORT $LL12@threadqueu

; 353  :       pthread_cond_signal(&threadqueue->job_available);
; 354  :     }
; 355  :   }

	jmp	$LL2@threadqueu
$LN196@threadqueu:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN201@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN199@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	npad	1
$LN203@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	npad	1
$LN217@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	npad	1
$LN215@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	npad	1
$LN213@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN211@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN209@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN207@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN205@threadqueu:
	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN204@threadqueu:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 357  :   threadqueue->thread_running_count--;

	dec	DWORD PTR [rdi+36]
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN187@threadqueu

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN187@threadqueu:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 359  :   return NULL;

	xor	eax, eax

; 360  : }

	mov	rbx, QWORD PTR [rsp+88]
	mov	rbp, QWORD PTR [rsp+96]
	add	rsp, 32					; 00000020H
	pop	r15
	pop	r14
	pop	r12
	pop	rdi
	pop	rsi
	ret	0
$LN244@threadqueu:
threadqueue_worker ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
job$ = 48
dependency$ = 56
kvz_threadqueue_job_dep_add PROC

; 495  : {

$LN63:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rdi, rcx
	mov	rbx, rdx
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rdx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN20@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN20@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 500  :   if (dependency->state == THREADQUEUE_JOB_STATE_DONE) {

	cmp	DWORD PTR [rbx+8], 4
	jne	SHORT $LN3@kvz_thread
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	$LN57@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN3@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN39@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN39@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 507  :   job->ndepends++;

	inc	DWORD PTR [rdi+12]
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN48@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN48@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 511  :   if (dependency->rdepends_count >= dependency->rdepends_size) {

	mov	eax, DWORD PTR [rbx+28]
	cmp	DWORD PTR [rbx+24], eax
	jl	SHORT $LN7@kvz_thread

; 512  :     dependency->rdepends_size += THREADQUEUE_LIST_REALLOC_SIZE;
; 513  :     size_t bytes = dependency->rdepends_size * sizeof(threadqueue_job_t*);
; 514  :     dependency->rdepends = realloc(dependency->rdepends, bytes);

	mov	rcx, QWORD PTR [rbx+16]
	add	eax, 32					; 00000020H
	movsxd	rdx, eax
	shl	rdx, 3
	mov	DWORD PTR [rbx+28], eax
	call	QWORD PTR __imp_realloc
	mov	QWORD PTR [rbx+16], rax
$LN7@kvz_thread:

; 516  :   dependency->rdepends[dependency->rdepends_count++] = kvz_threadqueue_copy_ref(job);

	mov	rcx, rdi
	call	kvz_threadqueue_copy_ref
	movsxd	rdx, DWORD PTR [rbx+24]
	mov	rcx, QWORD PTR [rbx+16]
	mov	QWORD PTR [rcx+rdx*8], rax
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rbx]
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 516  :   dependency->rdepends[dependency->rdepends_count++] = kvz_threadqueue_copy_ref(job);

	inc	DWORD PTR [rbx+24]
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN57@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN57@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 521  : }

	mov	rbx, QWORD PTR [rsp+48]
	mov	eax, 1
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN61@kvz_thread:
kvz_threadqueue_job_dep_add ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
job$ = 48
kvz_threadqueue_copy_ref PROC

; 530  : {

$LN6:
	push	rbx
	sub	rsp, 32					; 00000020H
	mov	rbx, rcx

; 531  :   int32_t new_refcount = KVZ_ATOMIC_INC(&job->refcount);

	mov	eax, 1
	lock xadd DWORD PTR [rcx+32], eax
	inc	eax

; 532  :   // The caller should have had another reference and we added one
; 533  :   // reference so refcount should be at least 2.
; 534  :   assert(new_refcount >= 2);

	cmp	eax, 2
	jge	SHORT $LN4@kvz_thread
	mov	r8d, 534				; 00000216H
	lea	rdx, OFFSET FLAT:$SG4294966906
	lea	rcx, OFFSET FLAT:$SG4294966905
	call	QWORD PTR __imp__wassert
$LN4@kvz_thread:

; 535  :   return job;
; 536  : }

	mov	rax, rbx
	add	rsp, 32					; 00000020H
	pop	rbx
	ret	0
kvz_threadqueue_copy_ref ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
job_ptr$ = 48
kvz_threadqueue_free_job PROC

; 548  : {

$LN68:
	push	rbx
	sub	rsp, 32					; 00000020H

; 549  :   threadqueue_job_t *job = *job_ptr;

	mov	rbx, QWORD PTR [rcx]

; 550  :   if (job == NULL) return;

	test	rbx, rbx
	je	$LN1@kvz_thread

; 551  :   *job_ptr = NULL;

	mov	QWORD PTR [rsp+48], rsi

; 552  : 
; 553  :   int new_refcount = KVZ_ATOMIC_DEC(&job->refcount);

	mov	eax, -1
	xor	esi, esi
	mov	QWORD PTR [rcx], rsi
	lock xadd DWORD PTR [rbx+32], eax
	sub	eax, 1

; 554  :   if (new_refcount > 0) {

	jg	$LN65@kvz_thread

; 555  :     // There are still references so we don't free the data yet.
; 556  :     return;
; 557  :   }
; 558  : 
; 559  :   assert(new_refcount == 0);

	mov	QWORD PTR [rsp+56], rdi
	test	eax, eax
	je	SHORT $LN8@kvz_thread
	mov	r8d, 559				; 0000022fH
	lea	rdx, OFFSET FLAT:$SG4294966904
	lea	rcx, OFFSET FLAT:$SG4294966903
	call	QWORD PTR __imp__wassert
$LN8@kvz_thread:

; 560  : 
; 561  :   for (int i = 0; i < job->rdepends_count; i++) {

	mov	edi, esi
	cmp	DWORD PTR [rbx+24], esi
	jle	SHORT $LN3@kvz_thread
	npad	7
$LL4@kvz_thread:

; 562  :     kvz_threadqueue_free_job(&job->rdepends[i]);

	mov	rax, QWORD PTR [rbx+16]
	movsxd	rcx, edi
	lea	rcx, QWORD PTR [rax+rcx*8]
	call	kvz_threadqueue_free_job
	inc	edi
	cmp	edi, DWORD PTR [rbx+24]
	jl	SHORT $LL4@kvz_thread
$LN3@kvz_thread:

; 563  :   }
; 564  :   job->rdepends_count = 0;
; 565  : 
; 566  :   FREE_POINTER(job->rdepends);

	mov	rcx, QWORD PTR [rbx+16]
	mov	DWORD PTR [rbx+24], esi
	call	QWORD PTR __imp_free
	mov	QWORD PTR [rbx+16], rsi
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 75   :     delete static_cast<std::mutex*>(*mutex);

	mov	rdi, QWORD PTR [rbx]
	test	rdi, rdi
	je	SHORT $LN54@kvz_thread
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 44   :         _Mtx_destroy_in_situ(_Mymtx());

	mov	rcx, rdi
	call	QWORD PTR __imp__Mtx_destroy_in_situ
	mov	edx, 80					; 00000050H
	mov	rcx, rdi
	call	??3@YAXPEAX_K@Z				; operator delete
$LN54@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 568  :   FREE_POINTER(job);

	mov	rcx, rbx
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 76   :     *mutex = nullptr;

	mov	QWORD PTR [rbx], rsi
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 568  :   FREE_POINTER(job);

	call	QWORD PTR __imp_free
	mov	rdi, QWORD PTR [rsp+56]
$LN65@kvz_thread:
	mov	rsi, QWORD PTR [rsp+48]
$LN1@kvz_thread:

; 569  : }

	add	rsp, 32					; 00000020H
	pop	rbx
	ret	0
kvz_threadqueue_free_job ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c
_TEXT	SEGMENT
$T1 = 32
threadqueue$ = 64
kvz_threadqueue_stop PROC

; 597  : {

$LN88:
	mov	QWORD PTR [rsp+8], rbx
	mov	QWORD PTR [rsp+16], rsi
	mov	QWORD PTR [rsp+24], rdi
	push	r14
	sub	rsp, 48					; 00000030H
	mov	rdi, rcx
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 51   :         _Check_C_return(_Mtx_lock(_Mymtx()));

	mov	rcx, QWORD PTR [rcx]
	call	QWORD PTR __imp__Mtx_lock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN22@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN22@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 600  :   if (threadqueue->stop) {

	cmp	BYTE PTR [rdi+40], 0
	je	SHORT $LN6@kvz_thread

; 601  :     // The threadqueue should have stopped already.
; 602  :     assert(threadqueue->thread_running_count == 0);

	cmp	DWORD PTR [rdi+36], 0
	je	SHORT $LN13@kvz_thread
	mov	r8d, 602				; 0000025aH
	lea	rdx, OFFSET FLAT:$SG4294966885
	lea	rcx, OFFSET FLAT:$SG4294966884
	call	QWORD PTR __imp__wassert
$LN13@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	$LN3@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN6@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 608  :   threadqueue->stop = true;

	mov	BYTE PTR [rdi+40], 1
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 593  :         _Check_C_return(_Cnd_broadcast(_Mycnd()));

	mov	rcx, QWORD PTR [rdi+8]
	call	QWORD PTR __imp__Cnd_broadcast
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN42@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	npad	1
$LN42@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\mutex

; 67   :         _Check_C_return(_Mtx_unlock(_Mymtx()));

	mov	rcx, QWORD PTR [rdi]
	call	QWORD PTR __imp__Mtx_unlock
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\xthreads.h

; 130  :     if (_Res != _Thrd_success) {

	test	eax, eax
	je	SHORT $LN51@kvz_thread

; 131  :         _Throw_C_error(_Res);

	mov	ecx, eax
	call	QWORD PTR __imp_?_Throw_C_error@std@@YAXH@Z
	int	3
$LN51@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 613  :   for (int i = 0; i < threadqueue->thread_count; i++) {

	xor	esi, esi
	cmp	DWORD PTR [rdi+32], esi
	jle	SHORT $LN3@kvz_thread
	mov	r14d, esi
	npad	7
$LL4@kvz_thread:
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadwrapper\src\pthread.cpp

; 68   :     std::thread* real_thread = static_cast<std::thread*>(thread);

	mov	rax, QWORD PTR [rdi+24]
	mov	rbx, QWORD PTR [r14+rax]
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread

; 101  :         return _Thr._Id != 0;

	cmp	DWORD PTR [rbx+8], 0

; 105  :         if (!joinable()) {

	je	SHORT $LN77@kvz_thread

; 107  :         }
; 108  : 
; 109  :         if (_Thr._Id == _Thrd_id()) {

	call	QWORD PTR __imp__Thrd_id
	cmp	DWORD PTR [rbx+8], eax
	je	SHORT $LN78@kvz_thread

; 111  :         }
; 112  : 
; 113  :         if (_Thrd_join(_Thr, nullptr) != _Thrd_success) {

	movups	xmm0, XMMWORD PTR [rbx]
	movaps	XMMWORD PTR $T1[rsp], xmm0
	xor	edx, edx
	lea	rcx, QWORD PTR $T1[rsp]
	call	QWORD PTR __imp__Thrd_join
	test	eax, eax
	jne	SHORT $LN79@kvz_thread
	xorps	xmm0, xmm0

; 115  :         }
; 116  : 
; 117  :         _Thr = {};

	movups	XMMWORD PTR [rbx], xmm0

; 101  :         return _Thr._Id != 0;

	cmp	DWORD PTR [rbx+8], eax

; 77   :         if (joinable()) {

	jne	SHORT $LN80@kvz_thread
	lea	edx, QWORD PTR [rax+16]
	mov	rcx, rbx
	call	??3@YAXPEAX_K@Z				; operator delete
; File C:\Users\84038\Desktop\video_codec_thread_test\src\threadqueue.c

; 613  :   for (int i = 0; i < threadqueue->thread_count; i++) {

	inc	esi
	add	r14, 8
	cmp	esi, DWORD PTR [rdi+32]
	jl	SHORT $LL4@kvz_thread
$LN3@kvz_thread:

; 614  :     if (pthread_join(threadqueue->threads[i], NULL) != 0) {
; 615  :       fprintf(stderr, "pthread_join failed!\n");
; 616  :       return 0;
; 617  :     }
; 618  :   }
; 619  : 
; 620  :   return 1;

	mov	eax, 1

; 621  : }

	mov	rbx, QWORD PTR [rsp+64]
	mov	rsi, QWORD PTR [rsp+72]
	mov	rdi, QWORD PTR [rsp+80]
	add	rsp, 48					; 00000030H
	pop	r14
	ret	0
$LN80@kvz_thread:
; File D:\software_install\VS2019\VC\Tools\MSVC\14.26.28801\include\thread

; 78   :             _STD terminate();

	call	QWORD PTR __imp_terminate
	int	3
$LN79@kvz_thread:

; 114  :             _Throw_Cpp_error(_NO_SUCH_PROCESS);

	mov	ecx, 2
	call	QWORD PTR __imp_?_Throw_Cpp_error@std@@YAXH@Z
	int	3
$LN78@kvz_thread:

; 110  :             _Throw_Cpp_error(_RESOURCE_DEADLOCK_WOULD_OCCUR);

	mov	ecx, 5
	call	QWORD PTR __imp_?_Throw_Cpp_error@std@@YAXH@Z
	int	3
$LN77@kvz_thread:

; 106  :             _Throw_Cpp_error(_INVALID_ARGUMENT);

	mov	ecx, 1
	call	QWORD PTR __imp_?_Throw_Cpp_error@std@@YAXH@Z
	int	3
$LN85@kvz_thread:
kvz_threadqueue_stop ENDP
_TEXT	ENDS
END
